{% extends 'base.html' %}

{% block content %}
    <h1>Welcome to the smart home assistant.</h1>

    {% if user.home_id == None %}
        <h1>First you should name your home!</h1>
        <form action="" method="POST" novalidate>
            {{ form.hidden_tag() }}
            <p>
                {{ form.name.label }} <br>
                {{ form.name(size=30) }}                
            </p>
            <p>
                {{ form.submit() }}
            </p>
        </form>
    {% else %}
        <style>
            .led    { grid-area: led; }
            .temp   { grid-area: temp; }
            .hum    { grid-area: hum; }

            .grid-container {
                display: grid;
                grid-template-areas:
                    'led temp hum';
                grid-gap: 10px;
                background-color: grey;
                padding: 10px;
            }
            .grid-container > div {
                background-color:darkgray;
                text-align: center;
                padding: 20px 0;
                font-size: 20px;
            }
        </style>
        <div>
            <h3>Username: {{ user.username }}</h3>
            <h3>Email: {{ user.email }}</h3>                     
        </div>
        <br>
        <h2>Dashboard</h2>
        <h3>{{ home_name }}</h3>
        <div id='dashboard' class='grid-container'>
            <div id='led'>
                Led
            </div>
            <div id='temp'>
                Temp
            </div>
            <div id='hum'>
                Hum
            </div>
        </div>
        <!--
        <div id="led">
            <button id="led_start"> On</button>
            <button id="led_colorshift"> Colorshift </button>
            <button id="led_increaseBrightness"> Increase Brightness</button> 
            <button id="led_decreaseBrightness"> Decrease Brightness</button>
            <button id="led_stop"> Off </button> 
            <script src="{{ url_for('static', filename='client/socketio_client.js') }}"></script>
            <script type='text/javascript'>
                $(document).ready(function ()   {
                    
                    var socket = io.connect('https://smart-home-assistant.herokuapp.com/',{secure: true});
                    
                    
                    socket.on('connect', function() {
                        socket.send('')
                    });

                });
            </script>
        </div>

        <br>
        <div>
            <h3>Temperature</h3>
            <table>
                <tr>
                    <th>Id</th>
                    <th>Value</th>
                    <th>Timestamp</th>
                </tr>                
                {% for temperature in temperature_list %}
                    <tr>
                        <td>{{ temperature.id }}</td>
                        <td>{{ temperature.data_reading }}</td>                          
                        <td>{{ temperature.timestamp }}</td>                          
                    </tr>
                {% endfor %}
            </table>                    
        </div>        
        <div>
            <h3>Humidity</h3>
            <table>
                <tr>
                    <th>Id</th>
                    <th>Value</th>
                    <th>Timestamp</th>
                </tr>                
                {% for humidity in humidity_list %}
                    <tr>
                        <td>{{ humidity.id }}</td>
                        <td>{{ humidity.data_reading }}</td>                          
                        <td>{{ humidity.timestamp }}</td>                          
                    </tr>
                {% endfor %}
            </table>                    
        </div>
        -->
    {% endif %}
{% endblock content %}