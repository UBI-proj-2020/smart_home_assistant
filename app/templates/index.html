{% extends 'base.html' %}

{% block content %}
    <h1>Welcome to the smart_house assistant.</h1>

    {% if user.home_id == None %}
        <h1>You must create a new house.</h1>
        <form action="" method="POST" novalidate>
            {{ form.hidden_tag() }}
            <p>
                {{ form.name.label }} <br>
                {{ form.name(size=30) }}                
            </p>
            <p>
                {{ form.submit() }}
            </p>
        </form>
    {% else %}
        <div>
            <h3>Username: {{ user.username }}</h3>
            <h3>Email: {{ user.email }}</h3>            
            <h3>{{ home_name }}</h3>            
        </div>
        <br>
        <div id="led">
           <button id="led_start"></button>
           <button id="led_colorshift"></button>
           <button id="led_increaseBrightness"></button> 
           <button id="led_decreaseBrightness"></button>
           <button id="led_stop"></button> 
           <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.slim.js"></script>
           <script src="{{ url_for('static', filename='client/socketio_client.js') }}"></script>
        </div>

        <br>
        <div>
            <h3>Temperature</h3>
            <table>
                <tr>
                    <th>Id</th>
                    <th>Value</th>
                    <th>Timestamp</th>
                </tr>                
                {% for temperature in temperature_list %}
                    <tr>
                        <td>{{ temperature.id }}</td>
                        <td>{{ temperature.data_reading }}</td>                          
                        <td>{{ temperature.timestamp }}</td>                          
                    </tr>
                {% endfor %}
            </table>                    
        </div>        
        <div>
            <h3>Humidity</h3>
            <table>
                <tr>
                    <th>Id</th>
                    <th>Value</th>
                    <th>Timestamp</th>
                </tr>                
                {% for humidity in humidity_list %}
                    <tr>
                        <td>{{ humidity.id }}</td>
                        <td>{{ humidity.data_reading }}</td>                          
                        <td>{{ humidity.timestamp }}</td>                          
                    </tr>
                {% endfor %}
            </table>                    
        </div>

    {% endif %}
{% endblock content %}